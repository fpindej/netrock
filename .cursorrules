# Cursor Rules — Web App Template

Full-stack web application: .NET 10 backend (Clean Architecture) + SvelteKit frontend (Svelte 5), fully dockerized.

## Read These First

- **Project overview & agent workflow**: `AGENTS.md` (root)
- **Backend conventions**: `src/backend/AGENTS.md`
- **Frontend conventions**: `src/frontend/AGENTS.md`

## Critical Rules

### Backend (.NET 10 / C# 13)
- Use `Result` / `Result<T>` for operations that can fail — never throw for business logic
- Use C# 13 extension member syntax (`extension(Type) { }`) for all extension methods
- Use primary constructors for dependency injection
- Entities extend `BaseEntity` — never set audit fields manually (AuditingInterceptor handles it)
- EF configurations extend `BaseEntityConfiguration<T>` and override `ConfigureEntity`
- Mark infrastructure implementations as `internal`
- Include XML docs on all controller actions — they feed the OpenAPI spec consumed by the frontend
- Co-locate FluentValidation validators with their request DTOs

### Frontend (SvelteKit / Svelte 5)
- Svelte 5 Runes only — `$props()`, `$state`, `$derived`, `$effect` — never `export let`
- Never hand-edit `v1.d.ts` — run `npm run api:generate`
- Use barrel exports from feature folders — never import `.svelte` files directly
- Use logical CSS properties only (`ms-`, `me-`, `ps-`, `pe-`) — never `ml-`, `mr-`
- No `any` type — define proper interfaces
- Server config: import from `$lib/config/server` directly, never from the barrel
- Don't work around missing API endpoints — propose them instead

### Git & Workflow
- Commit atomically after each logical unit of work using Conventional Commits
- Run pre-commit checks: `dotnet build` (backend), `npm run format && npm run lint && npm run check` (frontend)
- Generate session documentation in `docs/sessions/` with Mermaid diagrams at end of each session
