# ══════════════════════════════════════════════════════════════════════════════
#  ASP.NET Configuration Overrides — Production
# ══════════════════════════════════════════════════════════════════════════════
#
#  Env vars loaded into the API container via the env_file directive.
#  These override appsettings.json values.
#
# ══════════════════════════════════════════════════════════════════════════════

# ── Authentication (JWT) ─────────────────────────────────────────────────────
# Token lifetimes (defaults are conservative for production):
# Authentication__Jwt__AccessTokenLifetime=00:15:00
# Authentication__Jwt__RefreshToken__PersistentLifetime=30.00:00:00
# Authentication__Jwt__RefreshToken__SessionLifetime=1.00:00:00
# Authentication__Jwt__Issuer=MyProjectIssuer
# Authentication__Jwt__Audience=MyProjectAudience

# ── Caching / Redis (RECOMMENDED) ───────────────────────────────────────────
# Enable Redis as the distributed cache backend (recommended for production).
# When false or omitted, falls back to in-memory cache.
Caching__Redis__Enabled=true

# Circuit breaker — short-circuits cache operations during sustained outages.
# Defaults (5 failures / 30s break / 30s window) are suitable for most deployments.
# Caching__CircuitBreaker__FailureThreshold=5
# Caching__CircuitBreaker__BreakDuration=00:00:30
# Caching__CircuitBreaker__SamplingDuration=00:00:30

# ── CORS (REQUIRED for web access) ──────────────────────────────────────────
# Lock down to your exact domain(s). Never use AllowAllOrigins in production.
Cors__AllowAllOrigins=false
Cors__AllowedOrigins__0=https://your-domain.com

# ── Hosting ──────────────────────────────────────────────────────────────────
# Force HTTPS scheme in generated URLs (e.g. email links). Default: true.
# Hosting__ForceHttps=true

# Trusted reverse proxy networks for X-Forwarded-For header processing.
# Add your load balancer / reverse proxy IP or CIDR:
# Hosting__ReverseProxy__TrustedNetworks__0=10.0.0.0/16
# Hosting__ReverseProxy__TrustedProxies__0=10.0.0.5

# ── Email (REQUIRED for password reset / email verification) ────────────────
Email__Smtp__Host=smtp.example.com
Email__Smtp__Port=587
Email__Smtp__Username=<smtp-username>
Email__Smtp__Password=<smtp-password>
Email__Smtp__UseSsl=true
Email__FromAddress=noreply@your-domain.com
Email__FromName=MyApp
# Base URL for links in emails (password reset, email verification).
# Must match the public frontend URL.
Email__FrontendBaseUrl=https://your-domain.com

# ── CAPTCHA (Cloudflare Turnstile) ──────────────────────────────────────────
# Secret key (server-side validation, consumed by the API):
Captcha__SecretKey=<your-turnstile-secret-key>

# ── Job Scheduling (Hangfire) ────────────────────────────────────────────────
# Disable background job processing on this node (e.g. if running dedicated workers).
# JobScheduling__Enabled=true
# JobScheduling__WorkerCount=4

# ── Rate Limiting ────────────────────────────────────────────────────────────
# RateLimiting__Global__PermitLimit=60
# RateLimiting__Global__Window=00:01:00

# ── Logging ──────────────────────────────────────────────────────────────────
# Serilog__MinimumLevel__Default=Warning
