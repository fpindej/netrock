# ══════════════════════════════════════════════════════════════════════════════
#  Docker Compose Variables — Local Development
# ══════════════════════════════════════════════════════════════════════════════
#
#  Variables consumed by docker-compose via ${VAR} interpolation.
#  Shared across services (database, storage, frontend, etc.).
#
#  Passed to docker compose via --env-file flag in up.sh.
#
# ══════════════════════════════════════════════════════════════════════════════

# ── Database (PostgreSQL) ────────────────────────────────────────────────────
POSTGRES_USER=admin
POSTGRES_PASSWORD=pwd
POSTGRES_DB={INIT_PROJECT_SLUG}

# ── File Storage (MinIO / S3) ────────────────────────────────────────────────
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
FileStorage__BucketName={INIT_PROJECT_SLUG}-files

# ── Authentication ───────────────────────────────────────────────────────────
# The init script replaces {INIT_JWT_SECRET} with a random 64-character secret.
# For local development, any string >= 32 characters works fine.
JWT_SECRET_KEY={INIT_JWT_SECRET}

# ── CAPTCHA (Cloudflare Turnstile) ──────────────────────────────────────────
# The testing key below always passes validation (Cloudflare's official test key).
# Get a real key at: https://dash.cloudflare.com/?to=/:account/turnstile
TURNSTILE_SITE_KEY=1x00000000000000000000AA

# ── Frontend ─────────────────────────────────────────────────────────────────
# URL the frontend container uses to reach the backend API.
# To debug the backend in Rider/VS while the frontend runs in Docker,
# uncomment and point to the host machine:
# API_URL=http://host.docker.internal:5142

# Number of trusted reverse proxy hops in front of the SvelteKit server.
# Not needed when no reverse proxy sits in front of SvelteKit (e.g., local Docker).
# XFF_DEPTH=1

# Additional origins allowed through the SvelteKit API proxy CSRF check.
# Comma-separated. Use when accessing the frontend through a reverse proxy,
# tunnel (ngrok, Tailscale), or any URL that differs from the app's own origin.
# ALLOWED_ORIGINS=https://abc123.ngrok-free.app

# ── Docker Compose Ports ─────────────────────────────────────────────────────
# Override to resolve port conflicts when running multiple projects.
# Defaults are baked into docker-compose.local.yml during init.
# FRONTEND_PORT={INIT_FRONTEND_PORT}
# API_PORT={INIT_API_PORT}
# DB_PORT={INIT_DB_PORT}
# STORAGE_PORT={INIT_STORAGE_PORT}
# STORAGE_CONSOLE_PORT={INIT_STORAGE_CONSOLE_PORT}
# SEQ_PORT={INIT_SEQ_PORT}
